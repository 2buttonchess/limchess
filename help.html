<!DOCTYPE html>
<html>
  <head>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' type='text/css' href='css/chess.css'>
    <script src='js/jquery-3.4.1.min.js'></script>
    <script>
      var selectableItems;
      var selectItemsIdx = 0;

      function checkGamepad() {
        var gp = navigator.getGamepads()[0];
        var axeLR = gp.axes[0];
        var axeUD = gp.axes[1];
        if(axeUD < -0.5) {
          var y = $(window).scrollTop();
          $(window).scrollTop(y-50); 
        } else if(axeUD > 0.5) {
          var y = $(window).scrollTop();
          $(window).scrollTop(y+50); 
        }
        
        $(selectableItems[selectItemsIdx]).css("border", "none")

        if(axeLR < -0.5) {
          window.location.href = selectableItems[selectItemsIdx].href
        } else if(axeLR > 0.5) {
          if(selectItemsIdx == selectableItems.length - 1) {
            selectItemsIdx = 0
          } else {
            selectItemsIdx++
          }
        }
        $(selectableItems[selectItemsIdx]).css("border", "0.5rem solid yellow")
      }

      function canGame() {
        return "getGamepads" in navigator;
      }

      $(document).ready(function() {
        var hasGP = false;
        var gp;
        selectableItems = document.getElementsByTagName("BODY")[0].querySelectorAll("a")
        if(canGame()) {

          $(window).on("gamepadconnected", function() {
              hasGP = true;
              console.log("connection event");
              gp = window.setInterval(checkGamepad,150);
          });

          $(window).on("gamepaddisconnected", function() {
              console.log("disconnection event");
              window.clearInterval(gp)
          });

          //setup an interval for Chrome
          var checkGP = window.setInterval(function() {
              if(navigator.getGamepads()[0]) {
                  if(!hasGP) $(window).trigger("gamepadconnected");
                  window.clearInterval(checkGP);
              }
          }, 500);
        }  
      })
    </script>
    <title>limchess ~ help</title>
  </head>
  <body>
    <div id='header'>
      <h1>limchess</h1>
      <h2>Limited input accessible chess</h2>
    </div>
    <nav>
      <ul>
        <li><a href="about.html">about</a></li>
        <li><a href="index.html">play</a></li>
      </ul>
    </nav>

    <div class='content'>
      <h3>Learning to play?</h3>
      <p>
      The game of chess is a fun and complicated adventure where 2 armies fight a
      grand battle to capture the opponent's king! Along the way, their soldiers
      will have to stand guard, fight other soldiers, or position themselves for a
      strategic strike.
      </p>
      <p>
      If you're getting started with the game, we recommend using the buttons on
      the site to explore and try moving the pieces around. Once you've won or lost
      a game or two, you should have an idea of how the pieces move and what they
      can do. If you want to dive into the rules, you can check out
      <a href="https://www.chesskid.com/how-to-play-chess">Chess Kid's How to
         Play Chess</a>.
      </p>
      <p>The important thing is to have fun!</p>

      <h3>Playing with 2 buttons</h3>
      <p>
      Using a keyboard? Try the <kbd>Tab</kbd> key to move around, and the
      <kbd>Enter</kbd> or <kbd>Return</kbd> key to press a button or follow a
      link! See below for button descriptions.
      </p>
      <p>
      Got a gamepad or other set of switches? The "left" control should toggle
      moves, and the "right" control should accept them (not yet implemented).
      When the game ends, "left" will start a new game as White, and "right" will
      start a new game as Black.
      </p>
      <p>All the page elements support focus and click events.</p>

      <h3>Controls</h3>
      <dl id='controls'>
        <dt>Show next move</dt>
        <dd>
        <p>Don't like the current move? Press this button to see another!</p>
        <p>
        Shows another move option by highlighting your piece and the square it will
        move to.
        </p>
        </dd>

        <dt>Accept current move</dt>
        <dd>
        <p>Like the current move? Press this button to play it!</p>
        <p>Plays the currently highlighted move and waits for the opponent to move</p>
        </dd>

        <dt>Generate new moves</dt>
        <dd>
        <p>Unhappy with your move options? Press this button to get more!</p>
        <p>Generates a new list of move options</p>
        </dd>

        <dt>New game as (Black or White)</dt>
        <dd>
        <p>
        Ready for the next match? Pick your color and press one of these buttons!
        Remember, White goes first!
        </p>
        <p>Starts a new game as the selected color</p>
        </dd>

        <dt>Number of player choices (dropdown)</dt>
        <dd>
        <p>Need more or fewer options? Pick a number here!</p>
        <p>Controls how many moves the player is allowed to pick from</p>
        </dd>
      </dl>
    </div>

  </body>
</html>
